version: 0.2

eb_codebuild_settings:
  CodeBuildServiceRole: ${CodeBuildServiceRole}
  ComputeType: BUILD_GENERAL1_SMALL
  Image: aws/codebuild/standard:2.0

phases:
  install:
    runtime-versions:
      python: 3.7
  pre_build:
    commands:
      # Install the dependancies:
      - pip install -r ./requirements.txt
      # Run the tests that support threading all at once:
      - python -m pytest -s -m parallel -n auto test_mainManager.py --api ${TmpUrl}
      # Run the single threaded tests w/out the -n:
      - python -m pytest -s -m serial test_mainManager.py --api ${TmpUrl}
      - echo "End of building this..."
